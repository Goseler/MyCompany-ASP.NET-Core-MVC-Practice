@{
    string strTitle = "Панель администратора";
    ViewBag.Title = strTitle;
}


<div>
    <h1>@strTitle</h1>

    <div>
        <label>Выберите страницу для редактирования: </label>
        <select id="changeStatus" name="changeStatus" onClick="func()" >
            <option value="MainPages">Страницы сайта</option>
            <option value="Services">Наши услуги</option>
            <option value="News">Новости</option>
            <option value="NewsReviews">Рецензии новостей</option>
            <option value="UsersMessages">Сообщения от пользователей</option>
        </select>

        <div id="results"></div>

        <div class="div-box">
            <form asp-area="" asp-controller="Account" asp-action="Logout" method="post">
                <input type="submit" value="Выйти" />
            </form>
        </div>
    </div>
    </div>


<script>
    function AjaxLoad() {
        $.ajax({
            url: '@Url.Action("Index", "Home")',
            data: { Page: $('select#changeStatus').val() },
            type: 'POST',
            success: function (data) {
                $("#results").html(data);
            }
        });
    }

    $('select#changeStatus').change(function () {
        AjaxLoad.call();
    });

    let temp = document.querySelector('#changeStatus');
    window.onload = () => {
        temp.value = sessionStorage.getItem('ActiveOption') ? sessionStorage.getItem('ActiveOption') : 'MainPages';
        AjaxLoad.call();
    };
    temp.onclick = () => {
        sessionStorage.setItem('ActiveOption', temp.value);
    };
</script>

