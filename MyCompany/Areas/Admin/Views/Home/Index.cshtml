@{
    string strTitle = "Панель администратора";
    ViewBag.Title = strTitle;
}


<div>
    <h1>@strTitle</h1>

    <div>
        <label>Выберите страницу для редактирования: </label>
        <select id="changeStatus" name="changeStatus">
            <option value="MainPages">Страницы сайта</option>
            <option value="Services">Наши услуги</option>
            <option value="News">Новости</option>
            <option value="NewsReviews">Рецензии новостей</option>
            <option value="UsersMessages">Сообщения от пользователей</option>
        </select>

        <div id="results"></div>

        <div class="div-box">
            <form asp-area="" asp-controller="Account" asp-action="Logout" method="post">
                <input type="submit" value="Выйти" />
            </form>
        </div>
    </div>
</div>


<script>
    function AjaxLoad() {
        $.ajax({
            url: '@Url.Action("Index", "Home", new { Area = "Admin" })',
            data: { Page: $('select#changeStatus').val() },
            type: 'POST',
            success: function (data) {
                $("div#results").html(data);
            }
        });
    }

    //function selectClick() {
    //    let activeOption = document.querySelector('select#changeStatus');
    //    sessionStorage.setItem('ActiveOption', activeOption.value);
    //}

    //function loadSelect() {
    //    let activeOption = document.querySelector('select#changeStatus');
    //    activeOption.value = sessionStorage.getItem('ActiveOption') ? sessionStorage.getItem('ActiveOption') : 'MainPages';
    //    AjaxLoad.call();
    //}

    let activeOption = document.querySelector('select#changeStatus');
    $('select#changeStatus').change(function () {
        AjaxLoad.call();
    });
    window.onload = () => {
        activeOption.value = sessionStorage.getItem('ActiveOption') ? sessionStorage.getItem('ActiveOption') : 'MainPages';
    AjaxLoad.call();
    };
    activeOption.onclick = () => {
        sessionStorage.setItem('ActiveOption', activeOption.value);
    };
</script>


